{% load metrics_tags %}

<section class="list-records">
    <h2>Records for {{ request.session.year }}</h2>
    <p>
        {% metric_years metric garden as years %}
        <label for="list-records-year">
            Change year:
        </label>
        <select class="list-records-year" id="list-records-year">
            {% for year in years %}
                <option {% ifequal year request.session.year %}selected{% endifequal %} value="{% url metric.garden_detail_url_name pk=garden.pk year=year %}">
                    {{ year }}
                </option>
            {% endfor %}
        </select>
    </p>

    <table class="table table-hover table-responsive sorted">
        <thead>
            <tr>
                {% block table_header %}{% endblock %}
                {% ifcandelete metric %}
                    <th></th>
                {% endifcandelete %}
            </tr>
        </thead>

        <tbody>
            {% block table_body %}
                {% metric_content_type metric as content_type %}
                {% for record in records %}
                    <tr class="record" data-record-type-pk="{{ content_type.pk }}" data-pk="{{ record.pk }}">

                        {% block record_detail %}{% endblock %}

                        {% ifcandelete metric %}
                            <td class="actions">
                                <button class="delete-record btn btn-xs btn-danger">x</button>
                            </td>
                        {% endifcandelete %}
                    </tr>
                {% endfor %}
            {% endblock %}
        </tbody>
    </table>
</section>
