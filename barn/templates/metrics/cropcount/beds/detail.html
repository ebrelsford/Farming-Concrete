{% extends "metrics/cropcount/beds/base.html" %}
{% load static %}

{% block title %}{{ bed.garden.name }}, bed {{ bed.name }}{% endblock %}
{% block header_title %}{{ bed.garden.name }}, bed {{ bed.name }}{% endblock %}

{% block breadcrumbs %}{{ block.super }} <a href="{% url "cropcount_garden_details" pk=bed.garden.id year=request.session.year %}">{{ bed.garden.name }}</a> &gt;&gt; bed {{ bed.name }} {% endblock %}

{% block head %}
<script src="{% static "js/jquery-util.js" %}" type="text/javascript"></script>
<script src="{% static "js/help.js" %}" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $('#variety_help').help({ text: 'Start typing the plant type that you are entering and choose the closest match. Please let us know if you want to enter a plant type that does not exist.' });
        $('#quantity_help').help({ text: "Please enter the number of plants of this type and/or the area these plants are planted in. We prefer to know the number of plants, but sometimes that's difficult!" });
    });
</script>
{% endblock %}

{% block content %}
{% if bed %}
    <h1 class="pre-listview">
    {% if not is_mobile %}
    <a href="{% url "cropcount_garden_details" pk=bed.garden.id year=request.session.year %}">{{ bed.garden.name }}</a>, bed {{ bed.name }}
    {% else %}
    bed {{ bed.name }}
    {% endif %}
    </h1>

    <div id="plants">
        <ul class="values" data-role="listview">
            {% if not is_mobile %}
            <li id="new-plant" style="border-bottom: 2px solid black; margin-bottom: 10px;">
            {% include "metrics/cropcount/patches/add_snippet.html" %}
            </li>
            {% else %}
            <li data-icon="plus">
                <a href="{% url "cropcount_add_patch" bed_id=bed.pk %}">Add plants</a>
            </li>
            {% endif %}

            {% with patches=bed.patch_set.all %}
            {% include "metrics/cropcount/patches/list_snippet.html" %}
            {% endwith %}
        </ul>
    </div>
{% else %}
    <p>No such bed</p>
{% endif %}
{% endblock %}

{% block actions %}
{{ block.super }}
<h2>
    <a class="image" href="{% url "cropcount_garden_details" pk=bed.garden.id year=request.session.year %}"><img src="{% static "img/round_checkmark.png" %}" /></a>
    <a class="text" href="{% url "cropcount_garden_details" pk=bed.garden.id year=request.session.year %}">Done adding plants to this bed!</a>
</h2>
{% endblock %}

{% block footer_nav %}
{{ block.super }}
<li><a href="{% url "cropcount_garden_details" pk=bed.garden.pk year=request.session.year %}" data-icon="arrow-u">Garden Home</a></li>
{% endblock %}
