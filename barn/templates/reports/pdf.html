{% load static %}

<!doctype html>
<head>
    <style>
        @page {
            size: letter portrait;

            @frame header {
                top: 1cm;
                height: 7cm;
                margin-left: 1cm;
                margin-right: .5cm;
            }
            @frame middle {
                top: 7cm;
                bottom: 3.5cm;
                margin-left: 1cm;
                margin-right: .5cm;
            }
            @frame footer {
                -pdf-frame-content: footerContent;
                bottom: .5cm;
                height: 3cm;
                margin-left: .5cm;
            }
        }

        @page harvestcount-pages {
            size: letter portrait;

            @frame header {
                -pdf-frame-content: harvestcount-header-content;
                top: 1cm;
                height: 7cm;
                margin-left: 1cm;
                margin-right: .5cm;
            }
            @frame middle {
                top: 7cm;
                bottom: 2.5cm;
                margin-left: 1cm;
                margin-right: .5cm;
            }
            @frame footer {
                -pdf-frame-content: footerContent;
                bottom: .5cm;
                height: 1.5cm;
                margin-left: .5cm;
                margin-right: .5cm;
            }
        }

        @page cropcount-pages {
            size: letter portrait;

            @frame header {
                -pdf-frame-content: cropcount-header-content;
                top: 1cm;
                height: 7cm;
                margin-left: 1cm;
                margin-right: .5cm;
            }
            @frame middle {
                top: 7cm;
                bottom: 2.5cm;
                margin-left: 1cm;
                margin-right: .5cm;
            }
            @frame footer {
                -pdf-frame-content: footerContent;
                bottom: .5cm;
                height: 1.5cm;
                margin-left: .5cm;
                margin-right: .5cm;
            }
        }

        @font-face {
            font-family: "LinoLetterStd";
            src: url({% static "img/report/LinoLetterStd-Black.ttf" %});
        }

        @font-face {
            font-family: "LinoLetterStd";
            src: url('{% static "img/report/LinoLetterStd-Bold.ttf" %}');
            font-weight: bold;
        }

        table, table tr, table td,
        img,
        div {
            padding: 0;
            margin: 0;
        }

        .page {
            page-break-after: always;
        }

        .footer {
            border-bottom: 1px solid black;
        }
        .pagenumber {
            padding-top: 15px;
            text-align: right;
        }

        .header {
            border-bottom: .5pt solid black;
            color: #858585;
        }

        .title {
            font-family: LinoLetterStd; 
            font-size: 32px; 
            text-align: right;
            vertical-align: bottom;
        }

        #cover-sheet .garden-name {
            text-align: center;
            padding-top: 50px;
            padding-bottom: 0;
            margin: 0;
        }

        #cover-sheet .report-name {
            font-family: LinoLetterStd;
            font-size: 28px;
            font-weight: bold;
            text-align: center;
            padding: 0;
            margin: 0;
        }

        #cover-sheet .page-name {
            font-family: LinoLetterStd;
            font-size: 22px;
            text-align: center;
            padding: 0;
            margin: 0;
            padding-bottom: 10px;
            padding-top: 50px;
        }

        #cover-sheet .logo {
            padding-left: 400px;
            padding-top: 250px;
        }

        #cover-sheet .summary {
            font-family: LinoLetterStd;
            font-weight: bold;
        }
        #cover-sheet .summary td {
            text-align: left;
        }
        #cover-sheet .summary td.data {
            width: 375px;
            vertical-align: top;
            padding-top: 70px;
        }
        #cover-sheet.crop-and-harvest .summary td.data {
            padding-top: 10px;
        }
        #cover-sheet .summary td.quantity {
            text-align: right;
        }

        .garden-name {
            font-family: LinoLetterStd;
            font-size: 36px;
            font-weight: bold;
            padding-top: 25px;
            padding-bottom: -20px; margin-bottom: 0;
        }
        .garden-name.long {
            font-size: 24px;
            padding-bottom: -10px;
        }
        .garden-name.very-long {
            font-size: 18px;
            padding-bottom: -10px;
        }

        .banner {
        }

        .summary {
            font-size: 16px;
        }
        .summary .quantity {
            padding-bottom: 5px;
            font-weight: normal;
        }
        .summary table {
        }

        .spacer {
            padding: 5px;
        }

        .section h3 {
            text-align: center;
            font-family: LinoLetterStd;
            font-size: 18px;
        }
        .data-table h3 {
            text-align: center;
        }
        .data-table table {
            width: 90%;
        }
        .data-table table th {
            text-align: left;
            font-size: 14px;
            border-right: 1px solid black;
        }

        .data-table table td {
            padding-top: 2px;
            padding-left: 2px;
            padding-right: 2px;
            border-right: 1px solid black;
        }
        .data-table table td.number {
            text-align: right;
        }
        .data-table table td.last_column,
        .data-table table th.last_column {
            border: 0;
        }

        .data-table table tr {
            border-bottom: 1px solid black;
        }
        .data-table table tr.even {
            background-color: #F2E3C4;
        }
        .data-table table tr.totals {
            font-weight: bold;
        }

        .chart {
            text-align: center;
        }
    </style>
</head>
<body class="pdfreport">
    <div class="page {% if has_cropcount and has_harvestcount %}crop-and-harvest{% endif %}" id="cover-sheet">
        <div>
            <h1 class="garden-name">{{ garden.name }}</h1>
            <h2 class="report-name">{{ year }} Farming Concrete Report</h2>
        </div>
        <pdf:nextframe>
        <div class="middle">
            <h3 class="page-name">At a glance:</h3>
            <div class="summary">
                <table>
                    <tr>
                        <td style="width: 80px;">
                        </td>
                        <td style="width: 91px;">
                            <img src="{% static "img/report/left_bracket_large.tiff" %}" width="91" height="300" />
                        </td>
                        <td class="data">
                            <table>
                                {% if has_harvestcount %}
                                <tr><td>
                                    Number of people who recorded:
                                </td></tr>
                                <tr><td class="quantity">
                                    {{ harvestcount_totals|length }}
                                </td></tr>
                                <tr><td>
                                    Total pounds recorded:
                                </td></tr>
                                <tr><td class="quantity">
                                    {{ harvestcount_total_weight|floatformat }}
                                </td></tr>
                                <tr><td>
                                    Estimated dollar value* of harvest recorded:
                                </td></tr>
                                <tr><td class="quantity">
                                    ${{ harvestcount_estimated_total_value|floatformat:"0" }}
                                </td></tr>
                                {% endif %}
                                {% if has_cropcount %}
                                <tr>
                                    <td>Total estimated weight (lbs):</td>
                                </tr>
                                <tr>
                                    <td class="quantity">
                                        {{ total_estimated_yield|floatformat:"0" }}
                                    </td>
                                </tr>
                                <tr>
                                    <td>Total estimated dollar value*:</td>
                                </tr>
                                <tr>
                                    <td class="quantity">
                                        ${{ total_estimated_value|floatformat:"0" }}
                                    </td>
                                </tr>
                                {% endif %}
                            </table>
                        </td>
                        <td style="width: 91px;">
                            <img src="{% static "img/report/right_bracket_large.tiff" %}" width="91" height="300" />
                        </td>
                    </tr>
                </table>
            </div>
            <div class="logo">
                <img src="{% static "img/report/logo.png" %}" width="400px" height="83px" />
            </div>
        </div>
        {% if has_harvestcount %}
        <pdf:nexttemplate name="harvestcount-pages">
        {% else %}
            {% if has_cropcount %}
            <pdf:nexttemplate name="cropcount-pages">
            {% endif %}
        {% endif %}
    </div>

    {% if has_harvestcount %}
    <div class="page">
        <div class="middle section data-table">
            <h3>Total harvest per gardener</h3>
            {% include "reports/harvestcount_gardener_table_with_dollar_values.html" %}
            <h3>Total harvest per crop</h3>
            {% include "reports/harvestcount_crop_table_with_dollar_values.html" %}
        </div>
    </div>
    <div class="page">
        <div class="middle section chart">
            <h3>Total harvest per crop</h3>
            <img src="{{ charts.weight_per_crop.image.url }}" width="850px" />
        </div>
        {% if has_cropcount %}
        <pdf:nexttemplate name="cropcount-pages">
        {% endif %}
    </div>
    {% endif %}
   
    {% if has_cropcount %}
    <div class="page">
        <div class="middle section data-table">
            <h3>Estimated garden yield per crop</h3>
            {% include "reports/cropcount_crop_table_with_dollar_values.html" %}
        </div>
    </div>
    <div class="page">
        <div class="middle section chart">
            <h3>Estimated garden yield</h3>
            <img src="{{ charts.estimated_weight_per_crop.image.url }}" width="850px" />
        </div>
    </div>
    {% endif %}

    <div id="harvestcount-header-content">
        <div class="header">
            <table>
                <tr>
                    <td width="49%" style="padding-top: -25px;">
                        <img src="{% static "img/report/logo.png" %}" width="400px" height="83px" />
                    </td>
                    <td width="49%" valign="bottom">
                        <h1 class="title">{{ year }} Harvest Report</h1>
                    </td>
                </tr>
            </table>
        </div>
        <div class="garden-name{% if garden_name_length > 33 %} {% if garden_name_length <= 60 %} long {% else %} very-long {% endif %} {% endif %}">
            {{ garden.name }}
        </div>
        <div class="banner">
            <img src="{% static "img/report/radishes_shorter.JPG" %}" width="3260" height="440" style="width: 100%;" />
        </div>
    </div>

    <div id="cropcount-header-content">
        <div class="header">
            <table>
                <tr>
                    <td width="49%" style="padding-top: -25px;">
                        <img src="{% static "img/report/logo.png" %}" width="400px" height="83px" />
                    </td>
                    <td width="49%" valign="bottom">
                        <h1 class="title">{{ year }} Crop Report</h1>
                    </td>
                </tr>
            </table>
        </div>
        <div class="garden-name{% if garden_name_length > 33 %} {% if garden_name_length <= 60 %} long {% else %} very-long {% endif %} {% endif %}">
            {{ garden.name }}
        </div>
        <div class="banner">
            <img src="{% static "img/report/radishes_shorter.JPG" %}" width="3260" height="440" style="width: 100%;" />
        </div>
    </div>

    <div id="footerContent">
        <div class="footer">
            * We use a combination of Whole Foods, Greenmarket, and BK Farmyards prices to account for the local and often organic nature of community gardening in New York City.
        </div>
        <div class="pagenumber">
            <pdf:pagenumber>
        </div>
    </div>

</body>
