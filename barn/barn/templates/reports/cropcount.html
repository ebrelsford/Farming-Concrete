<div>
    <h2>Crop Count</h2>
    {% if beds %}

    {% if garden %}
    <div class="beds section collapsible collapsed">
        <h3 class="expander"><a href="#">Click to show/hide full crop count</a></h3>
        <div class="expandee">
        {% include "cropcount/gardens/snippet.html" %}
        </div>
    </div>
    {% endif %}

    <div class="totals section">
        <h3>Totals</h3>
        <table class="totals cycled">
            {% if cropcount_gardens_count %}
            <tr class="even">
                <th>participating gardens</th><td>{{ cropcount_gardens_count }}</td>
            </tr>
            {% endif %}
            <tr class="odd">
                <th>number of beds</th><td>{{ total_beds }}</td>
            </tr>
            <tr class="even">
                <th>area under production</th><td>{{ total_area|floatformat }} sq ft</td>
            </tr>
            <tr class="odd">
                <th>plants</th><td>{{ total_plants }}</td>
            </tr>
            {% if total_estimated_yield %}
            <tr class="even">
                <th>estimated yield</th><td>{{ total_estimated_yield|floatformat }} lbs</td>
            </tr>
            {% endif %}
            {% if total_estimated_yield_type %}
            <tr class="odd">
                <th>estimated yield using {{ type }} yields</th><td>{{ total_estimated_yield_type|floatformat }} lbs</td>
            </tr>
            {% endif %}
            {% if total_estimated_value %}
            <tr class="even">
                <th>estimated value</th><td>${{ total_estimated_value|floatformat:"0" }}</td>
            </tr>
            {% endif %}
            {% if total_estimated_value_type %}
            <tr class="odd">
                <th>estimated value using {{ type }} yields</th><td>${{ total_estimated_value_type|floatformat:"0" }}</td>
            </tr>
            {% endif %}
        </table>

        <h4>plants per crop</h4>
        <table class="sorted">
            <thead>
                <tr>
                    <th>plant type</th>
                    <th>plants</th>
                    <th>area</th>
                    {% if not garden %}
                    <th>avg yield overall<br />(lbs per plant)</th>
                    {% endif %}
                    <th>estimated yield (lbs)</th>
                    <th>estimated value</th>
                    {% if not garden and type %}
                    <th>avg yield for {{ type.name }}s<br />(lbs per plant)</th>
                    <th>estimated yield using {{ type.name }}s avg<br />(lbs per plant)</th>
                    <th>estimated value using {{ type.name }}s avg</th>
                    {% endif %}
                </tr>
            </thead>
            <tbody>
                {% for crop in crops %}
                <tr>
                    <td>{{ crop.variety__name }}</td>
                    <td>{{ crop.plants|default:"" }}</td>
                    <td>{{ crop.area|default:"" }}</td>
                    {% if not garden %}
                    <td>{{ crop.average_yield|default:"" }}</td>
                    {% endif %}
                    <td>{{ crop.estimated_yield|default:"" }}</td>
                    <td>{% if crop.estimated_value %}${{ crop.estimated_value|floatformat:"0" }}{% endif %}</td>
                    {% if not garden and type %}
                    <td>{{ crop.type_average_yield|default:"" }}</td>
                    <td>{{ crop.type_estimated_yield|default:"" }}</td>
                    <td>{% if crop.type_estimated_value %}${{ crop.type_estimated_value|floatformat:"0" }}{% endif %}</td>
                    {% endif %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% if garden %}
        <img src="{% url reports.views.bar_chart_plants_per_crop id=garden.id year=year %}" />
        {% endif %}
    </div>
    {% else %}
    No crop count available.
    {% endif %}
</div>
