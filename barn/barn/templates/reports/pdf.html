<!doctype html>

<head>

    <style>
        @page {
            size: letter portrait;

            @frame header {
                top: 1cm;
                height: 7cm;
                margin-left: 1cm;
                margin-right: .5cm;
            }
            @frame middle {
                top: 7cm;
                margin-left: 1cm;
                margin-right: .5cm;
            }
            @frame footer {
                -pdf-frame-content: footerContent;
                bottom: .5cm;
                height: 3cm;
                margin-left: .5cm;
            }
        }

        @font-face {
            font-family: "LinoLetterStd";
            src: url({{ MEDIA_URL }}img/report/LinoLetterStd-Black.ttf);
        }

        @font-face {
            font-family: "LinoLetterStd";
            src: url('{{ MEDIA_URL }}img/report/LinoLetterStd-Bold.ttf');
            font-weight: bold;
        }

        table, table tr, table td,
        img,
        div {
            padding: 0;
            margin: 0;
        }

        .page {
            position: relative;
            top: 10cm;
            page-break-after: always;
        }

        .footer {
            border-bottom: 1px solid black;
        }
        .pagenumber {
            padding-top: 15px;
            text-align: right;
        }

        .header {
            border-bottom: .5pt solid black;
            color: #858585;
        }

        .title {
            font-family: LinoLetterStd; 
            font-size: 32px; 
            text-align: right;
            vertical-align: bottom;
        }

        .garden-name {
            font-family: LinoLetterStd;
            font-size: 36px;
            font-weight: bold;
            padding-top: 25px;
            padding-bottom: -20px; margin-bottom: 0;
        }

        .banner {
            /*padding-bottom: 10px;*/
        }

        .summary {
            font-size: 16px;
        }
        .summary .quantity {
            font-weight: bold;
            padding-bottom: 5px;
        }
        .summary table {
        }

        .spacer {
            padding: 5px;
        }

        .section h3 {
            text-align: center;
            font-family: LinoLetterStd;
            font-size: 18px;
        }
        .data-table h3 {
            text-align: center;
        }
        .data-table table {
            width: 90%;
        }
        .data-table table th {
            text-align: left;
            border-right: 1px solid black;
        }

        .data-table table td {
            padding-top: 2px;
            padding-left: 2px;
            padding-right: 2px;
            border-right: 1px solid black;
        }
        .data-table table td.last_column,
        .data-table table th.last_column {
            border: 0;
        }

        .data-table table tr {
            border-bottom: 1px solid black;
        }
        .data-table table tr.even {
            background-color: #F2E3C4;
        }
        .data-table table tr.totals {
            font-weight: bold;
        }

        .chart {
            text-align: center;
        }
    </style>

</head>

<body class="pdfreport">

    {% if has_harvestcount %}
    <div class="page">
        <div class="headerContent">
            <div class="header">
                <table>
                    <tr>
                        <td width="49%" style="padding-top: -25px;">
                            <img src="{{ MEDIA_URL }}img/report/logo.png" width="400px" height="83px" />
                        </td>
                        <td width="49%" valign="bottom">
                            <h1 class="title">2011 Harvest Report</h1>
                        </td>
                    </tr>
                </table>
            </div>

            {# TODO if name too long, banner disappears! #}
            <div class="garden-name">{{ garden.name }}</div>

            <div class="banner">
                <img src="{{ MEDIA_URL }}img/report/radishes_shorter.JPG" width="3260" height="440" style="width: 100%;" />
            </div>
        </div>

        <div class="middle">
            <table>
                <tr>
                    <td class="section data-table" width="50%" valign="top">
                        <h3>Total harvest per gardener</h3>
                        {% include "reports/harvestcount_gardener_table_with_dollar_values.html" %}
                    </td>

                    <td class="section chart" width="50%" valign="top">
                        <h3>Total harvest per crop</h3>
                        <img src="{{ charts.weight_per_crop.image.url }}" />
                    </td>
                </tr>
                <tr class="spacer">
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td class="summary" colspan="2">
                        <table>
                            <tr>
                                <td style="width: 150px;">
                                </td>
                                <td style="width: 65px;">
                                    <img src="{{ MEDIA_URL }}img/report/left_bracket.png" width="63" height="203" />
                                </td>
                                <td style="width: 320px;">
                                    <table>
                                        <tr><td>
                                            Number of people who recorded:
                                        </td></tr>
                                        <tr><td class="quantity">
                                            {{ harvestcount_totals|length }} gardener{{ harvestcount_totals|pluralize }}
                                        </td></tr>
                                        <tr><td>
                                            Total pounds recorded:
                                        </td></tr>
                                        <tr><td class="quantity">
                                            {{ harvestcount_total_weight|floatformat }} pounds
                                        </td></tr>
                                        <tr><td>
                                            Estimated dollar value* of harvest recorded:
                                        </td></tr>
                                        <tr><td class="quantity">
                                            ${{ harvestcount_estimated_total_value|floatformat:"0" }}
                                        </td></tr>
                                    </table>
                                </td>
                                <td style="width: 65px;">
                                    <img src="{{ MEDIA_URL }}img/report/right_bracket.png" width="63" height="203" />
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    {% endif %}
   
    {% if has_cropcount %}
    <div class="page">
        <div class="headerContent">
            <div class="header">
                <table>
                    <tr>
                        <td width="49%" style="padding-top: -25px;">
                            <img src="{{ MEDIA_URL }}img/report/logo.png" width="400px" height="83px" />
                        </td>
                        <td width="49%" valign="bottom">
                            <h1 class="title">2011 Crop Report</h1>
                        </td>
                    </tr>
                </table>
            </div>

            {# TODO if name too long, banner disappears! #}
            <div class="garden-name">{{ garden.name }}</div>

            <div class="banner">
                <img src="{{ MEDIA_URL }}img/report/radishes_shorter.JPG" width="3260" height="440" style="width: 100%;" />
            </div>
        </div>

        <div class="middle">
            <table>
                <tr>
                    <td class="section chart" colspan="2" width="100%" valign="top">
                        <h3>Estimated garden yield</h3>
                        <img src="{{ charts.estimated_weight_per_crop.image.url }}" width="600px" />
                    </td>
                </tr>
                <tr class="spacer">
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td class="summary" colspan="2">
                        <table>
                            <tr>
                                <td style="width: 180px;">
                                </td>
                                <td style="width: 65px;">
                                    <img src="{{ MEDIA_URL }}img/report/left_bracket.png" height="180px" />
                                </td>
                                <td style="width: 220px;">
                                    <table>
                                        <tr>
                                            <td>Total estimated weight:</td>
                                        </tr>
                                        <tr>
                                            <td class="quantity">
                                                {{ cropcount_estimated_pounds|floatformat:"0" }} pound{{ cropcount_estimated_pounds|pluralize }}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Total estimated dollar value*:</td>
                                        </tr>
                                        <tr>
                                            <td class="quantity">
                                                ${{ cropcount_estimated_value|floatformat:"0" }}
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                                <td style="width: 65px;">
                                    <img src="{{ MEDIA_URL }}img/report/right_bracket.png" height="180px" />
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    {% endif %}

    <div id="footerContent">
        <div class="footer">
            * We use a combination of Whole Foods, Greenmarket, and BK Farmyards prices to account for the local and often organic nature of community gardening in New York City.
        </div>
        <div class="pagenumber">
            <pdf:pagenumber>
        </div>
    </div>

</body>
